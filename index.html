<html>
   
   <head>
     <!-- HTTP 1.1 -->
     <meta http-equiv="Cache-Control" content="no-store"/>
     <!-- HTTP 1.0 -->
     <meta http-equiv="Pragma" content="no-cache"/>
     <!-- Prevents caching at the Proxy Server -->
     <meta http-equiv="Expires" content="0"/>
   </head>
   <body>
     <div id="testResultsArea" style="font-size:24px;width:200px;height:200px;"></div>
     <button id="lookAheadTriggerButton">Look Ahead Triggering</button>
     <button id="directTriggerButton">Direct Protocol Triggering</button>
     <div id="hiddenIframeContainer" style="display:none"></div>
   </body>
   <script>
     const testResultsArea = document.getElementById("testResultsArea")
     var testProtocolWindow = undefined;
    
     function openAndWait(ms) {
       testProtocolWindow = window.open("masterintraining23.github.io/myappprotocol.html", "", "width=1,height=1,titlebar=yes,menubar=yes,status=yes,top=23,left=36");
       testProtocolWindow.document.body.addEventListener("blur", () => console.log("blur"));
//        setInterval(() => console.log(testProtocolWindow.document.activeElement), 50);
       setTimeout(() => testProtocolWindow.close(), ms);
     }

     window.renderSuccessfulText = () => {
        testResultsArea.innerHTML = "Application Exists! :)";
     };
      
//      function testExistence() {
//        try {
//          console.log(testProtocolWindow.location.hostname);
//        } catch {
//          testResultsArea.innerHTML = "Application Doesn't Exist. :(";
//          console.log("failed");
//        } finally {
//          testProtocolWindow.close();
//        }
//      }
     
     function createProtocolIframe() {
       const iframe = document.createElement("iframe");
       iframe.src = "something://";
       return iframe;
     }
     
     const lookAheadButton = document.getElementById("lookAheadTriggerButton");
     lookAheadButton.addEventListener("click", () => openAndWait(75));
     
     const directButton = document.getElementById("directTriggerButton");
     const hiddenIframeContainer = document.getElementById("hiddenIframeContainer");
     directButton.addEventListener("click", () => {
       hiddenIframeContainer.append(createProtocolIframe());
     });
   </script>
</html>
